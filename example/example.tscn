[gd_scene format=3 uid="uid://hhuduf5ke6gr"]

[ext_resource type="Shader" uid="uid://51ovkht22eyd" path="res://addons/asciidot/ascii_terminal.gdshader" id="1_8clr1"]
[ext_resource type="Texture2D" uid="uid://chi6g351cx0u1" path="res://addons/asciidot/default_font/CGA8x8thin.png" id="2_7cn0y"]
[ext_resource type="Script" uid="uid://dkkrtoenbacfv" path="res://addons/asciidot/ascii_terminal.gd" id="3_scst5"]

[sub_resource type="GDScript" id="GDScript_kyidp"]
script/source = "@tool
extends Control

func _ready() -> void:
	%AsciiTerminal.clear_characters(
		32, Color.ANTIQUE_WHITE, Color.TRANSPARENT
	)

func _process(_delta: float) -> void:
	var b := (\"Its: %s\" % Time.get_datetime_string_from_system()).to_ascii_buffer()
	for i in range(b.size()):
		_set_char(Vector2i(i  + 2, 2), b[i])
	
	draw_border()
	draw_hsv_band(Vector2i(2, 4), b.size())
	draw_cards(Vector2i(2, 6), b.size())

func draw_border():
	var tem := %AsciiTerminal
	
	for x in range(tem.terminal_size.x):
		_set_char(Vector2i(x, 0), 205)
		_set_char(Vector2i(x, tem.terminal_size.y-1), 205)
	
	for y in range(tem.terminal_size.y):
		_set_char(Vector2i(0, y), 186)
		_set_char(Vector2i(tem.terminal_size.x-1, y), 186)
	
	_set_char(Vector2i(0, 0), 201)
	_set_char(Vector2i(0, tem.terminal_size.y-1), 200)
	_set_char(Vector2i(tem.terminal_size.x-1, tem.terminal_size.y-1), 188)
	_set_char(Vector2i(tem.terminal_size.x-1, 0), 187)

func draw_hsv_band(pos: Vector2i, length: int):
	var offset := floori(Time.get_unix_time_from_system() * 2)
	
	for i in range(length):
		%AsciiTerminal.set_character(
			pos + Vector2i(i, 0), 176,
			Color.from_hsv((1 - (i - offset) % length) / float(length),1.0,1.0),
			Color.from_hsv(((i + offset) % length) / float(length),1.0,1.0)
		)

func draw_cards(pos: Vector2i, length: int):
	var offset := floori(Time.get_unix_time_from_system())
	
	var symbols := [
		3,
		4,
		5,
		6
	]
	
	for i in range(length):
		var index = offset % symbols.size()
		_set_char(pos + Vector2i(i, 0.0), symbols[index])

func _set_char(pos: Vector2i, character: int):
	var offset := floori(Time.get_unix_time_from_system() * 2)
	
	const forground_colors = [
		Color.BROWN, Color.CRIMSON
	];
	%AsciiTerminal.set_character(pos, character,
	forground_colors[(pos.x + pos.y + offset) % forground_colors.size()], 
	Color.TRANSPARENT
)
"

[sub_resource type="Image" id="Image_8clr1"]
data = {
"data": PackedByteArray(255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 0, 0, 255, 255, 63, 0, 255, 255, 127, 0, 255, 255, 191, 0, 255, 255, 255, 0, 255, 255, 255, 0, 191, 255, 255, 0, 127, 255, 255, 0, 63, 255, 255, 0, 0, 255, 255, 63, 0, 255, 255, 127, 0, 255, 255, 191, 0, 255, 255, 255, 0, 255, 191, 255, 0, 255, 127, 255, 0, 255, 63, 255, 0, 255, 0, 255, 0, 255, 0, 255, 63, 255, 0, 255, 127, 255, 0, 255, 191, 255, 0, 255, 255, 255, 0, 191, 255, 255, 0, 127, 255, 255, 0, 63, 255, 255, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0),
"format": "RGBA8",
"height": 9,
"mipmaps": false,
"width": 28
}

[sub_resource type="ImageTexture" id="ImageTexture_rn4s5"]
image = SubResource("Image_8clr1")

[sub_resource type="Image" id="Image_7cn0y"]
data = {
"data": PackedByteArray(201, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 187, 186, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 186, 186, 32, 73, 116, 115, 58, 32, 50, 48, 50, 54, 45, 48, 50, 45, 49, 57, 84, 49, 51, 58, 49, 57, 58, 48, 56, 32, 186, 186, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 186, 186, 32, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 176, 32, 186, 186, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 186, 186, 32, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 32, 186, 186, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 186, 200, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 205, 188),
"format": "Red8",
"height": 9,
"mipmaps": false,
"width": 28
}

[sub_resource type="ImageTexture" id="ImageTexture_gqae1"]
image = SubResource("Image_7cn0y")

[sub_resource type="Image" id="Image_scst5"]
data = {
"data": PackedByteArray(165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 220, 20, 60, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 165, 42, 42, 255, 165, 42, 42, 255, 250, 235, 215, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 250, 235, 215, 255, 220, 20, 60, 255, 220, 20, 60, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 165, 42, 42, 255, 165, 42, 42, 255, 250, 235, 215, 255, 63, 0, 255, 255, 0, 0, 255, 255, 0, 63, 255, 255, 0, 127, 255, 255, 0, 191, 255, 255, 0, 255, 255, 255, 0, 255, 191, 255, 0, 255, 127, 255, 0, 255, 63, 255, 0, 255, 0, 255, 63, 255, 0, 255, 127, 255, 0, 255, 191, 255, 0, 255, 255, 255, 0, 255, 255, 191, 0, 255, 255, 127, 0, 255, 255, 63, 0, 255, 255, 0, 0, 255, 255, 0, 63, 255, 255, 0, 127, 255, 255, 0, 191, 255, 255, 0, 255, 255, 191, 0, 255, 255, 127, 0, 255, 255, 250, 235, 215, 255, 220, 20, 60, 255, 220, 20, 60, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 165, 42, 42, 255, 165, 42, 42, 255, 250, 235, 215, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 250, 235, 215, 255, 220, 20, 60, 255, 220, 20, 60, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 250, 235, 215, 255, 165, 42, 42, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255, 165, 42, 42, 255, 220, 20, 60, 255),
"format": "RGBA8",
"height": 9,
"mipmaps": false,
"width": 28
}

[sub_resource type="ImageTexture" id="ImageTexture_jfb2l"]
image = SubResource("Image_scst5")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8c1es"]
shader = ExtResource("1_8clr1")
shader_parameter/font_texture = ExtResource("2_7cn0y")
shader_parameter/font_size = Vector2i(16, 16)
shader_parameter/character_buffer = SubResource("ImageTexture_gqae1")
shader_parameter/forground_color = SubResource("ImageTexture_jfb2l")
shader_parameter/background_color = SubResource("ImageTexture_rn4s5")

[node name="Terminal" type="Control" unique_id=915505239]
texture_filter = 1
texture_repeat = 1
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_kyidp")

[node name="ColorRect" type="ColorRect" parent="." unique_id=958503590]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="AspectRatioContainer" type="AspectRatioContainer" parent="." unique_id=1277277551]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
ratio = 3.1111

[node name="AsciiTerminal" type="ColorRect" parent="AspectRatioContainer" unique_id=1761379701]
unique_name_in_owner = true
material = SubResource("ShaderMaterial_8c1es")
layout_mode = 2
script = ExtResource("3_scst5")
ascii_font = ExtResource("2_7cn0y")
terminal_size = Vector2i(28, 9)
metadata/_custom_type_script = "uid://dkkrtoenbacfv"
